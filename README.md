# Модуль оплати AIFO для BILLmanager

Модуль оплати AIFO призначений для приймання платежів через платіжну систему AIFO в панелі керування BILLmanager. Модуль забезпечує формування платіжних запитів, обробку callback-повідомлень та перевірку підпису платежів.

Вимоги до системи: BILLmanager версії 5.x або новішої, PHP версії 7.0 або новішої, встановлені PHP-розширення php-xml, php-mysql, php-common.

Перед встановленням модуля необхідно встановити системні та PHP-залежності. Після встановлення залежностей завантажте архів модуля з репозиторію AIFO, розпакуйте його в каталог /usr/local/mgr5/ та видаліть архів. Переконайтеся, що файли модуля мають права доступу 755. Для застосування змін виконайте перезапуск BILLmanager.

Після встановлення модуля виконайте його налаштування в панелі керування BILLmanager. Для цього перейдіть у розділ «Методи оплати» та додайте новий метод оплати з назвою AIFO. У параметрах методу оплати вкажіть ідентифікатор магазину (merchant_id) та секретний ключ (secret_key), отримані в особистому кабінеті платіжної системи AIFO в розділі налаштувань магазину. Секретний ключ зберігається у зашифрованому вигляді.

У параметрі типу підпису (signature_type) необхідно вказати алгоритм хешування, що використовується в особистому кабінеті AIFO. Підтримуються такі значення: 1 — MD5, 2 — SHA256, 3 — SHA1, 4 — RIPEMD160, 5 — SHA384, 6 — SHA512. Значення параметра повинно повністю відповідати налаштуванням платіжної системи.

У параметрі URL сервісу AIFO зазначається адреса платіжного сервісу. За замовчуванням використовується https://aifo.pro. За необхідності може бути вказано production URL, наданий платіжною системою.

Для приймання повідомлень про результати платежів у налаштуваннях методу оплати необхідно вказати URL обробника callback: http://ваш-домен/mancgi/aiforesult.php, де ваш-домен — доменне ім’я сервера з установленим BILLmanager. Рекомендується використовувати захищене з’єднання HTTPS та забезпечити доступність URL з мережі Інтернет.

Формування підпису платіжного запиту виконується за формулою hash(shop_id:amount:secret_key:id), де shop_id — ідентифікатор магазину, amount — сума платежу, secret_key — секретний ключ, id — ідентифікатор платежу (elid). Тип функції хешування визначається значенням параметра signature_type.

Під час обробки callback-повідомлень виконується перевірка підпису за формулою hash(shop_id:sum:secret_key:invoice), де sum — сума платежу з callback, invoice — ідентифікатор платежу, переданий у повідомленні. Отриманий підпис порівнюється зі значенням http_auth_signature.

Модуль підтримує всі типи підписів, доступні в платіжній системі AIFO. Тип підпису в налаштуваннях модуля повинен збігатися з типом підпису, зазначеним в особистому кабінеті AIFO. У разі виникнення помилок рекомендується перевірити коректність параметрів, доступність callback URL та права доступу до файлів модуля.

Інформація про платіжну систему та технічна підтримка доступні на сайті https://aifo.pro, у документації https://aifo.pro/docs та через Telegram @aifo_bot.

Версія модуля: AIFO Payment Module for BILLmanager v1.0. © 2026 AIFO.PRO.
